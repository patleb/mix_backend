$spinner_duration: 6000ms !default;
$spinner_size: 40px !default;
$spinner_color: #ff1d5e !default;
$spinner_square_size: calc(#{$spinner_size} / 4);
$spinner_position: calc(-#{$spinner_square_size} * 2 / 3);
$spinner_multipliers: 6, 7, 8, 3, 4, 5, 0, 1, 2;

.self-building-square-spinner, .self-building-square-spinner * {
  box-sizing: border-box;
}

.self-building-square-spinner {
  height: $spinner_size;
  width: $spinner_size;
  top: $spinner_position;
}

.self-building-square-spinner .square {
  height: $spinner_square_size;
  width: $spinner_square_size;
  top: $spinner_position;
  margin-right: calc(#{$spinner_square_size} / 3);
  margin-top: calc(#{$spinner_square_size} / 3);
  background: $spinner_color;
  float: left;
  position:relative;
  opacity: 0;
  animation: self-building-square-spinner $spinner_duration infinite;
}

@for $i from 1 through length($spinner_multipliers) {
  .self-building-square-spinner .square:nth-child(#{$i}) {
    $delay_multiplier: nth($spinner_multipliers, $i);
    $delay_modifier: calc(#{$spinner_duration * 0.05});
    animation-delay: calc(#{$delay_modifier} * #{$delay_multiplier});
  }
}

.self-building-square-spinner .clear{
  clear: both;
}

@keyframes self-building-square-spinner {
  0% {
    opacity: 0;
  }
  5% {
    opacity: 1;
    top: 0;
  }
  50.9% {
    opacity: 1;
    top: 0;
  }
  55.9% {
    opacity: 0;
    top: inherit;
  }
}
